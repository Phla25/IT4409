{"ast":null,"code":"var _s = $RefreshSig$();\n// frontend/src/hooks/useGeolocation.js\nimport { useState, useEffect } from 'react';\nconst useGeolocation = () => {\n  _s();\n  const [location, setLocation] = useState({\n    loaded: false,\n    coordinates: {\n      lat: null,\n      lng: null\n    },\n    error: null\n  });\n\n  // Hàm xử lý khi lấy vị trí thành công\n  const onSuccess = position => {\n    setLocation({\n      loaded: true,\n      coordinates: {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      },\n      error: null\n    });\n  };\n\n  // Hàm xử lý khi lấy vị trí thất bại hoặc bị từ chối\n  const onError = error => {\n    setLocation({\n      loaded: true,\n      coordinates: {\n        lat: null,\n        lng: null\n      },\n      error: error.message || \"Lỗi định vị không xác định.\"\n    });\n  };\n  useEffect(() => {\n    // 1. Kiểm tra hỗ trợ trình duyệt\n    if (!(\"geolocation\" in navigator)) {\n      onError({\n        code: 0,\n        message: \"Trình duyệt không hỗ trợ định vị.\"\n      });\n      return;\n    }\n\n    // 2. Sử dụng watchPosition để theo dõi vị trí liên tục\n    const watchId = navigator.geolocation.watchPosition(onSuccess, onError, {\n      enableHighAccuracy: true,\n      // Tăng độ chính xác\n      timeout: 10000,\n      // Thời gian chờ\n      maximumAge: 0 // Không sử dụng cache\n    });\n\n    // 3. Cleanup: Dừng theo dõi khi component bị hủy\n    return () => navigator.geolocation.clearWatch(watchId);\n  }, []); // Chỉ chạy một lần khi component mount\n\n  return location;\n};\n_s(useGeolocation, \"/QhWFqBvzbijvoCWye77fwJKz3s=\");\nexport default useGeolocation;","map":{"version":3,"names":["useState","useEffect","useGeolocation","_s","location","setLocation","loaded","coordinates","lat","lng","error","onSuccess","position","coords","latitude","longitude","onError","message","navigator","code","watchId","geolocation","watchPosition","enableHighAccuracy","timeout","maximumAge","clearWatch"],"sources":["D:/lessonsatuniversity/CongNgheWebVaDichVuTrucTuyen/Project/IT4409/frontend/src/hooks/useGeolocation.js"],"sourcesContent":["// frontend/src/hooks/useGeolocation.js\r\nimport { useState, useEffect } from 'react';\r\n\r\nconst useGeolocation = () => {\r\n  const [location, setLocation] = useState({\r\n    loaded: false,\r\n    coordinates: { lat: null, lng: null },\r\n    error: null,\r\n  });\r\n\r\n  // Hàm xử lý khi lấy vị trí thành công\r\n  const onSuccess = (position) => {\r\n    setLocation({\r\n      loaded: true,\r\n      coordinates: {\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude,\r\n      },\r\n      error: null,\r\n    });\r\n  };\r\n\r\n  // Hàm xử lý khi lấy vị trí thất bại hoặc bị từ chối\r\n  const onError = (error) => {\r\n    setLocation({\r\n      loaded: true,\r\n      coordinates: { lat: null, lng: null },\r\n      error: error.message || \"Lỗi định vị không xác định.\",\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    // 1. Kiểm tra hỗ trợ trình duyệt\r\n    if (!(\"geolocation\" in navigator)) {\r\n      onError({ code: 0, message: \"Trình duyệt không hỗ trợ định vị.\" });\r\n      return;\r\n    }\r\n\r\n    // 2. Sử dụng watchPosition để theo dõi vị trí liên tục\r\n    const watchId = navigator.geolocation.watchPosition(onSuccess, onError, {\r\n      enableHighAccuracy: true, // Tăng độ chính xác\r\n      timeout: 10000,          // Thời gian chờ\r\n      maximumAge: 0,           // Không sử dụng cache\r\n    });\r\n\r\n    // 3. Cleanup: Dừng theo dõi khi component bị hủy\r\n    return () => navigator.geolocation.clearWatch(watchId);\r\n  }, []); // Chỉ chạy một lần khi component mount\r\n\r\n  return location;\r\n};\r\n\r\nexport default useGeolocation;"],"mappings":";AAAA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGL,QAAQ,CAAC;IACvCM,MAAM,EAAE,KAAK;IACbC,WAAW,EAAE;MAAEC,GAAG,EAAE,IAAI;MAAEC,GAAG,EAAE;IAAK,CAAC;IACrCC,KAAK,EAAE;EACT,CAAC,CAAC;;EAEF;EACA,MAAMC,SAAS,GAAIC,QAAQ,IAAK;IAC9BP,WAAW,CAAC;MACVC,MAAM,EAAE,IAAI;MACZC,WAAW,EAAE;QACXC,GAAG,EAAEI,QAAQ,CAACC,MAAM,CAACC,QAAQ;QAC7BL,GAAG,EAAEG,QAAQ,CAACC,MAAM,CAACE;MACvB,CAAC;MACDL,KAAK,EAAE;IACT,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMM,OAAO,GAAIN,KAAK,IAAK;IACzBL,WAAW,CAAC;MACVC,MAAM,EAAE,IAAI;MACZC,WAAW,EAAE;QAAEC,GAAG,EAAE,IAAI;QAAEC,GAAG,EAAE;MAAK,CAAC;MACrCC,KAAK,EAAEA,KAAK,CAACO,OAAO,IAAI;IAC1B,CAAC,CAAC;EACJ,CAAC;EAEDhB,SAAS,CAAC,MAAM;IACd;IACA,IAAI,EAAE,aAAa,IAAIiB,SAAS,CAAC,EAAE;MACjCF,OAAO,CAAC;QAAEG,IAAI,EAAE,CAAC;QAAEF,OAAO,EAAE;MAAoC,CAAC,CAAC;MAClE;IACF;;IAEA;IACA,MAAMG,OAAO,GAAGF,SAAS,CAACG,WAAW,CAACC,aAAa,CAACX,SAAS,EAAEK,OAAO,EAAE;MACtEO,kBAAkB,EAAE,IAAI;MAAE;MAC1BC,OAAO,EAAE,KAAK;MAAW;MACzBC,UAAU,EAAE,CAAC,CAAY;IAC3B,CAAC,CAAC;;IAEF;IACA,OAAO,MAAMP,SAAS,CAACG,WAAW,CAACK,UAAU,CAACN,OAAO,CAAC;EACxD,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER,OAAOhB,QAAQ;AACjB,CAAC;AAACD,EAAA,CA/CID,cAAc;AAiDpB,eAAeA,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}