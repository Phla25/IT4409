{"ast":null,"code":"var _jsxFileName = \"G:\\\\IT4409\\\\frontend\\\\src\\\\LocationCRUD.js\",\n  _s = $RefreshSig$();\n// frontend/src/LocationCRUD.js\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './context/AuthContext';\nimport * as XLSX from 'xlsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000/api/locations';\nconst ADMIN_API_URL = `${API_URL}/admin`;\nconst LocationCRUD = () => {\n  _s();\n  const {\n    userRole,\n    authHeaders\n  } = useAuth();\n  const [locations, setLocations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [currentLocationId, setCurrentLocationId] = useState(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    address: '',\n    district: '',\n    latitude: '',\n    longitude: '',\n    phone_number: '',\n    min_price: 0,\n    max_price: 0,\n    is_approved: false\n  });\n\n  // ----------------- PHÂN TRANG -----------------\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 10;\n\n  // ----------------- TÌM KIẾM + LỌC -----------------\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedWard, setSelectedWard] = useState('');\n\n  // ----------------- FETCH LOCATIONS -----------------\n  const fetchLocations = useCallback(async () => {\n    if (userRole !== 'admin') return;\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get(ADMIN_API_URL, {\n        headers: authHeaders\n      });\n      setLocations(response.data.data);\n      setCurrentPage(1);\n    } catch (err) {\n      setError('Không thể tải danh sách địa điểm. Hãy kiểm tra token hoặc server.');\n    } finally {\n      setLoading(false);\n    }\n  }, [userRole, authHeaders]);\n  useEffect(() => {\n    if (userRole === 'admin') fetchLocations();\n  }, [userRole, fetchLocations]);\n\n  // ----------------- FORM HANDLERS -----------------\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      address: '',\n      district: '',\n      latitude: '',\n      longitude: '',\n      phone_number: '',\n      min_price: 0,\n      max_price: 0,\n      is_approved: false\n    });\n    setIsEditing(false);\n    setCurrentLocationId(null);\n  };\n  const handleEdit = loc => {\n    setFormData({\n      ...loc,\n      latitude: String(loc.latitude),\n      longitude: String(loc.longitude)\n    });\n    setIsEditing(true);\n    setCurrentLocationId(loc.id);\n    window.scrollTo(0, 0);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(`Xóa địa điểm ID: ${id}?`)) return;\n    try {\n      await axios.delete(`${API_URL}/${id}`, {\n        headers: authHeaders\n      });\n      fetchLocations();\n    } catch {\n      setError('Không thể xóa địa điểm.');\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const data = {\n      ...formData,\n      latitude: Number(formData.latitude),\n      longitude: Number(formData.longitude),\n      min_price: Number(formData.min_price),\n      max_price: Number(formData.max_price)\n    };\n    try {\n      if (isEditing) {\n        await axios.put(`${API_URL}/${currentLocationId}`, data, {\n          headers: authHeaders\n        });\n      } else {\n        await axios.post(API_URL, data, {\n          headers: authHeaders\n        });\n      }\n      resetForm();\n      fetchLocations();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Lỗi khi lưu dữ liệu.');\n    }\n  };\n\n  // ----------------- EXCEL IMPORT -----------------\n  const handleExcelUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    try {\n      const data = await file.arrayBuffer();\n      const workbook = XLSX.read(data, {\n        type: 'array'\n      });\n      const sheetName = workbook.SheetNames[0];\n      const sheet = XLSX.utils.sheet_to_json(workbook.Sheets[sheetName]);\n      if (!Array.isArray(sheet) || sheet.length === 0) {\n        alert('File Excel không có dữ liệu hợp lệ!');\n        return;\n      }\n      const locationsData = sheet.map(row => ({\n        name: row['Tên địa điểm'] || '',\n        description: row['Mô tả'] || '',\n        address: row['Địa chỉ'] || '',\n        district: row['Phường/Xã'] || '',\n        latitude: Number(row['Vĩ độ']) || 0,\n        longitude: Number(row['Kinh độ']) || 0,\n        phone_number: row['Số điện thoại'] || '',\n        min_price: Number(row['Giá tối thiểu']) || 0,\n        max_price: Number(row['Giá tối đa']) || 0,\n        is_approved: row['Hiển thị'] === true || row['Hiển thị'] === 'TRUE'\n      }));\n      await axios.post(`${API_URL}/batch`, {\n        locations: locationsData\n      }, {\n        headers: authHeaders\n      });\n      alert(`Đã nhập ${locationsData.length} địa điểm thành công!`);\n      fetchLocations();\n    } catch (error) {\n      console.error(error);\n      alert('Lỗi khi xử lý hoặc gửi file Excel!');\n    } finally {\n      e.target.value = ''; // reset input file\n    }\n  };\n\n  // ----------------- LỌC + PHÂN TRANG -----------------\n  const uniqueWards = useMemo(() => [...new Set(locations.map(l => l.district).filter(Boolean))], [locations]);\n  const filteredLocations = useMemo(() => {\n    const term = searchTerm.toLowerCase();\n    return locations.filter(loc => {\n      var _loc$name;\n      const matchesName = (_loc$name = loc.name) === null || _loc$name === void 0 ? void 0 : _loc$name.toLowerCase().includes(term);\n      const matchesWard = selectedWard ? loc.district === selectedWard : true;\n      return matchesName && matchesWard;\n    });\n  }, [locations, searchTerm, selectedWard]);\n  const totalPages = Math.ceil(filteredLocations.length / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const currentLocations = filteredLocations.slice(startIndex, startIndex + itemsPerPage);\n  const goToPage = page => {\n    if (page >= 1 && page <= totalPages) setCurrentPage(page);\n  };\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchTerm, selectedWard]);\n\n  // ----------------- RENDER -----------------\n  if (userRole !== 'admin') return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"crud-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"crud-title\",\n      children: \"Qu\\u1EA3n l\\xFD \\u0110\\u1ECBa \\u0111i\\u1EC3m (Admin Dashboard)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"crud-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"crud-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: isEditing ? `Chỉnh sửa (ID: ${currentLocationId})` : 'Thêm Địa điểm Mới'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"crud-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          placeholder: \"T\\xEAn \\u0111\\u1ECBa \\u0111i\\u1EC3m\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"address\",\n          value: formData.address,\n          onChange: handleChange,\n          placeholder: \"\\u0110\\u1ECBa ch\\u1EC9\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"district\",\n          value: formData.district,\n          onChange: handleChange,\n          placeholder: \"Ph\\u01B0\\u1EDDng/X\\xE3\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"phone_number\",\n          value: formData.phone_number,\n          onChange: handleChange,\n          placeholder: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"latitude\",\n          value: formData.latitude,\n          onChange: handleChange,\n          placeholder: \"V\\u0129 \\u0111\\u1ED9\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"longitude\",\n          value: formData.longitude,\n          onChange: handleChange,\n          placeholder: \"Kinh \\u0111\\u1ED9\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"min_price\",\n          value: formData.min_price,\n          onChange: handleChange,\n          placeholder: \"Gi\\xE1 t\\u1ED1i thi\\u1EC3u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"max_price\",\n          value: formData.max_price,\n          onChange: handleChange,\n          placeholder: \"Gi\\xE1 t\\u1ED1i \\u0111a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        placeholder: \"M\\xF4 t\\u1EA3\",\n        className: \"crud-textarea\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"crud-checkbox\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          name: \"is_approved\",\n          checked: formData.is_approved,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), \"Hi\\u1EC3n th\\u1ECB tr\\xEAn b\\u1EA3n \\u0111\\u1ED3\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"crud-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: isEditing ? 'btn-warning' : 'btn-success',\n          children: isEditing ? 'Cập nhật' : 'Thêm mới'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn-gray\",\n          onClick: resetForm,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"crud-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn-blue\",\n        onClick: () => document.getElementById('excel-upload').click(),\n        children: \"Nh\\u1EADp t\\u1EEB Excel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"excel-upload\",\n        type: \"file\",\n        accept: \".xlsx, .xls\",\n        style: {\n          display: 'none'\n        },\n        onChange: handleExcelUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"crud-actions\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn-gray\",\n        onClick: () => window.open('/templates/locations_template.xlsx', '_blank'),\n        children: \"T\\u1EA3i file m\\u1EABu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"crud-search\",\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginBottom: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"T\\xECm theo t\\xEAn \\u0111\\u1ECBa \\u0111i\\u1EC3m...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedWard,\n        onChange: e => setSelectedWard(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"-- L\\u1ECDc theo Ph\\u01B0\\u1EDDng/X\\xE3 --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), uniqueWards.map((ward, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: ward,\n          children: ward\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"crud-subtitle\",\n      children: [\"Danh s\\xE1ch \\u0110\\u1ECBa \\u0111i\\u1EC3m (\", filteredLocations.length, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"crud-list\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0110ang t\\u1EA3i...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }, this) : currentLocations.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u ph\\xF9 h\\u1EE3p.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this) : currentLocations.map(loc => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `crud-card ${loc.is_approved ? 'approved' : 'pending'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"crud-card-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: loc.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: loc.is_approved ? 'status-approved' : 'status-pending',\n            children: loc.is_approved ? 'ĐÃ DUYỆT' : 'CHƯA DUYỆT'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"location-address\",\n          children: loc.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"crud-card-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEdit(loc),\n            className: \"btn-blue\",\n            children: \"S\\u1EEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(loc.id),\n            className: \"btn-red\",\n            children: \"X\\xF3a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 15\n        }, this)]\n      }, loc.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 7\n    }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pagination\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => goToPage(currentPage - 1),\n        disabled: currentPage === 1,\n        children: \"Trang tr\\u01B0\\u1EDBc\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Trang \", currentPage, \" / \", totalPages]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => goToPage(currentPage + 1),\n        disabled: currentPage === totalPages,\n        children: \"Trang sau\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationCRUD, \"v2f3ETQrA7r1Xe+ZokwiCPENUyY=\", false, function () {\n  return [useAuth];\n});\n_c = LocationCRUD;\nexport default LocationCRUD;\nvar _c;\n$RefreshReg$(_c, \"LocationCRUD\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","axios","useAuth","XLSX","jsxDEV","_jsxDEV","API_URL","ADMIN_API_URL","LocationCRUD","_s","userRole","authHeaders","locations","setLocations","loading","setLoading","error","setError","isEditing","setIsEditing","currentLocationId","setCurrentLocationId","formData","setFormData","name","description","address","district","latitude","longitude","phone_number","min_price","max_price","is_approved","currentPage","setCurrentPage","itemsPerPage","searchTerm","setSearchTerm","selectedWard","setSelectedWard","fetchLocations","response","get","headers","data","err","handleChange","e","value","type","checked","target","prev","resetForm","handleEdit","loc","String","id","window","scrollTo","handleDelete","confirm","delete","handleSubmit","preventDefault","Number","put","post","_err$response","_err$response$data","message","handleExcelUpload","file","files","arrayBuffer","workbook","read","sheetName","SheetNames","sheet","utils","sheet_to_json","Sheets","Array","isArray","length","alert","locationsData","map","row","console","uniqueWards","Set","l","filter","Boolean","filteredLocations","term","toLowerCase","_loc$name","matchesName","includes","matchesWard","totalPages","Math","ceil","startIndex","currentLocations","slice","goToPage","page","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","placeholder","required","onClick","document","getElementById","click","accept","style","display","open","gap","marginBottom","ward","idx","disabled","_c","$RefreshReg$"],"sources":["G:/IT4409/frontend/src/LocationCRUD.js"],"sourcesContent":["// frontend/src/LocationCRUD.js\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth } from './context/AuthContext';\r\nimport * as XLSX from 'xlsx';\r\n\r\nconst API_URL = 'http://localhost:5000/api/locations';\r\nconst ADMIN_API_URL = `${API_URL}/admin`;\r\n\r\nconst LocationCRUD = () => {\r\n  const { userRole, authHeaders } = useAuth();\r\n  const [locations, setLocations] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentLocationId, setCurrentLocationId] = useState(null);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    address: '',\r\n    district: '',\r\n    latitude: '',\r\n    longitude: '',\r\n    phone_number: '',\r\n    min_price: 0,\r\n    max_price: 0,\r\n    is_approved: false,\r\n  });\r\n\r\n  // ----------------- PHÂN TRANG -----------------\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 10;\r\n\r\n  // ----------------- TÌM KIẾM + LỌC -----------------\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedWard, setSelectedWard] = useState('');\r\n\r\n  // ----------------- FETCH LOCATIONS -----------------\r\n  const fetchLocations = useCallback(async () => {\r\n    if (userRole !== 'admin') return;\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await axios.get(ADMIN_API_URL, { headers: authHeaders });\r\n      setLocations(response.data.data);\r\n      setCurrentPage(1);\r\n    } catch (err) {\r\n      setError('Không thể tải danh sách địa điểm. Hãy kiểm tra token hoặc server.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [userRole, authHeaders]);\r\n\r\n  useEffect(() => {\r\n    if (userRole === 'admin') fetchLocations();\r\n  }, [userRole, fetchLocations]);\r\n\r\n  // ----------------- FORM HANDLERS -----------------\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      description: '',\r\n      address: '',\r\n      district: '',\r\n      latitude: '',\r\n      longitude: '',\r\n      phone_number: '',\r\n      min_price: 0,\r\n      max_price: 0,\r\n      is_approved: false,\r\n    });\r\n    setIsEditing(false);\r\n    setCurrentLocationId(null);\r\n  };\r\n\r\n  const handleEdit = (loc) => {\r\n    setFormData({\r\n      ...loc,\r\n      latitude: String(loc.latitude),\r\n      longitude: String(loc.longitude),\r\n    });\r\n    setIsEditing(true);\r\n    setCurrentLocationId(loc.id);\r\n    window.scrollTo(0, 0);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(`Xóa địa điểm ID: ${id}?`)) return;\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`, { headers: authHeaders });\r\n      fetchLocations();\r\n    } catch {\r\n      setError('Không thể xóa địa điểm.');\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const data = {\r\n      ...formData,\r\n      latitude: Number(formData.latitude),\r\n      longitude: Number(formData.longitude),\r\n      min_price: Number(formData.min_price),\r\n      max_price: Number(formData.max_price),\r\n    };\r\n    try {\r\n      if (isEditing) {\r\n        await axios.put(`${API_URL}/${currentLocationId}`, data, { headers: authHeaders });\r\n      } else {\r\n        await axios.post(API_URL, data, { headers: authHeaders });\r\n      }\r\n      resetForm();\r\n      fetchLocations();\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Lỗi khi lưu dữ liệu.');\r\n    }\r\n  };\r\n\r\n  // ----------------- EXCEL IMPORT -----------------\r\n  const handleExcelUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    try {\r\n      const data = await file.arrayBuffer();\r\n      const workbook = XLSX.read(data, { type: 'array' });\r\n      const sheetName = workbook.SheetNames[0];\r\n      const sheet = XLSX.utils.sheet_to_json(workbook.Sheets[sheetName]);\r\n\r\n      if (!Array.isArray(sheet) || sheet.length === 0) {\r\n        alert('File Excel không có dữ liệu hợp lệ!');\r\n        return;\r\n      }\r\n\r\n      const locationsData = sheet.map((row) => ({\r\n        name: row['Tên địa điểm'] || '',\r\n        description: row['Mô tả'] || '',\r\n        address: row['Địa chỉ'] || '',\r\n        district: row['Phường/Xã'] || '',\r\n        latitude: Number(row['Vĩ độ']) || 0,\r\n        longitude: Number(row['Kinh độ']) || 0,\r\n        phone_number: row['Số điện thoại'] || '',\r\n        min_price: Number(row['Giá tối thiểu']) || 0,\r\n        max_price: Number(row['Giá tối đa']) || 0,\r\n        is_approved: row['Hiển thị'] === true || row['Hiển thị'] === 'TRUE'\r\n      }));\r\n\r\n      await axios.post(`${API_URL}/batch`, { locations: locationsData }, { headers: authHeaders });\r\n\r\n      alert(`Đã nhập ${locationsData.length} địa điểm thành công!`);\r\n      fetchLocations();\r\n    } catch (error) {\r\n      console.error(error);\r\n      alert('Lỗi khi xử lý hoặc gửi file Excel!');\r\n    } finally {\r\n      e.target.value = ''; // reset input file\r\n    }\r\n  };\r\n\r\n  // ----------------- LỌC + PHÂN TRANG -----------------\r\n  const uniqueWards = useMemo(\r\n    () => [...new Set(locations.map((l) => l.district).filter(Boolean))],\r\n    [locations]\r\n  );\r\n\r\n  const filteredLocations = useMemo(() => {\r\n    const term = searchTerm.toLowerCase();\r\n    return locations.filter((loc) => {\r\n      const matchesName = loc.name?.toLowerCase().includes(term);\r\n      const matchesWard = selectedWard ? loc.district === selectedWard : true;\r\n      return matchesName && matchesWard;\r\n    });\r\n  }, [locations, searchTerm, selectedWard]);\r\n\r\n  const totalPages = Math.ceil(filteredLocations.length / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const currentLocations = filteredLocations.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n  const goToPage = (page) => {\r\n    if (page >= 1 && page <= totalPages) setCurrentPage(page);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [searchTerm, selectedWard]);\r\n\r\n  // ----------------- RENDER -----------------\r\n  if (userRole !== 'admin') return null;\r\n\r\n  return (\r\n    <div className=\"crud-container\">\r\n      <h2 className=\"crud-title\">Quản lý Địa điểm (Admin Dashboard)</h2>\r\n\r\n      {error && <div className=\"crud-error\">{error}</div>}\r\n\r\n      {/* FORM NHẬP / SỬA */}\r\n      <form onSubmit={handleSubmit} className=\"crud-form\">\r\n        <h3>{isEditing ? `Chỉnh sửa (ID: ${currentLocationId})` : 'Thêm Địa điểm Mới'}</h3>\r\n\r\n        <div className=\"crud-grid\">\r\n          <input name=\"name\" value={formData.name} onChange={handleChange} placeholder=\"Tên địa điểm\" required />\r\n          <input name=\"address\" value={formData.address} onChange={handleChange} placeholder=\"Địa chỉ\" required />\r\n          <input name=\"district\" value={formData.district} onChange={handleChange} placeholder=\"Phường/Xã\" required />\r\n          <input name=\"phone_number\" value={formData.phone_number} onChange={handleChange} placeholder=\"Số điện thoại\" />\r\n          <input type=\"number\" name=\"latitude\" value={formData.latitude} onChange={handleChange} placeholder=\"Vĩ độ\" required />\r\n          <input type=\"number\" name=\"longitude\" value={formData.longitude} onChange={handleChange} placeholder=\"Kinh độ\" required />\r\n          <input type=\"number\" name=\"min_price\" value={formData.min_price} onChange={handleChange} placeholder=\"Giá tối thiểu\" />\r\n          <input type=\"number\" name=\"max_price\" value={formData.max_price} onChange={handleChange} placeholder=\"Giá tối đa\" />\r\n        </div>\r\n\r\n        <textarea\r\n          name=\"description\"\r\n          value={formData.description}\r\n          onChange={handleChange}\r\n          placeholder=\"Mô tả\"\r\n          className=\"crud-textarea\"\r\n        />\r\n\r\n        <label className=\"crud-checkbox\">\r\n          <input type=\"checkbox\" name=\"is_approved\" checked={formData.is_approved} onChange={handleChange} />\r\n          Hiển thị trên bản đồ\r\n        </label>\r\n\r\n        <div className=\"crud-actions\">\r\n          <button type=\"submit\" className={isEditing ? 'btn-warning' : 'btn-success'}>\r\n            {isEditing ? 'Cập nhật' : 'Thêm mới'}\r\n          </button>\r\n          {isEditing && (\r\n            <button type=\"button\" className=\"btn-gray\" onClick={resetForm}>\r\n              Hủy\r\n            </button>\r\n          )}\r\n        </div>\r\n      </form>\r\n\r\n      {/* NÚT NHẬP TỪ EXCEL */}\r\n      <div className=\"crud-actions\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn-blue\"\r\n          onClick={() => document.getElementById('excel-upload').click()}\r\n        >\r\n          Nhập từ Excel\r\n        </button>\r\n        <input\r\n          id=\"excel-upload\"\r\n          type=\"file\"\r\n          accept=\".xlsx, .xls\"\r\n          style={{ display: 'none' }}\r\n          onChange={handleExcelUpload}\r\n        />\r\n      </div>\r\n\r\n      {/* NÚT TẢI FILE MẪU */}\r\n      <div className=\"crud-actions\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn-gray\"\r\n          onClick={() => window.open('/templates/locations_template.xlsx', '_blank')}\r\n        >\r\n          Tải file mẫu\r\n        </button>\r\n      </div>\r\n\r\n      {/* THANH TÌM KIẾM + FILTER */}\r\n      <div className=\"crud-search\" style={{ display: 'flex', gap: '10px', marginBottom: '10px' }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Tìm theo tên địa điểm...\"\r\n          value={searchTerm}\r\n          onChange={(e) => setSearchTerm(e.target.value)}\r\n        />\r\n        <select value={selectedWard} onChange={(e) => setSelectedWard(e.target.value)}>\r\n          <option value=\"\">-- Lọc theo Phường/Xã --</option>\r\n          {uniqueWards.map((ward, idx) => (\r\n            <option key={idx} value={ward}>\r\n              {ward}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* DANH SÁCH ĐỊA ĐIỂM */}\r\n      <h3 className=\"crud-subtitle\">\r\n        Danh sách Địa điểm ({filteredLocations.length})\r\n      </h3>\r\n      <div className=\"crud-list\">\r\n        {loading ? (\r\n          <p>Đang tải...</p>\r\n        ) : currentLocations.length === 0 ? (\r\n          <p>Không có dữ liệu phù hợp.</p>\r\n        ) : (\r\n          currentLocations.map((loc) => (\r\n            <div\r\n              key={loc.id}\r\n              className={`crud-card ${loc.is_approved ? 'approved' : 'pending'}`}\r\n            >\r\n              <div className=\"crud-card-header\">\r\n                <strong>{loc.name}</strong>\r\n                <span className={loc.is_approved ? 'status-approved' : 'status-pending'}>\r\n                  {loc.is_approved ? 'ĐÃ DUYỆT' : 'CHƯA DUYỆT'}\r\n                </span>\r\n              </div>\r\n              <p className=\"location-address\">{loc.address}</p>\r\n              <div className=\"crud-card-actions\">\r\n                <button onClick={() => handleEdit(loc)} className=\"btn-blue\">\r\n                  Sửa\r\n                </button>\r\n                <button onClick={() => handleDelete(loc.id)} className=\"btn-red\">\r\n                  Xóa\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* PHÂN TRANG */}\r\n      {totalPages > 1 && (\r\n        <div className=\"pagination\">\r\n          <button onClick={() => goToPage(currentPage - 1)} disabled={currentPage === 1}>\r\n            Trang trước\r\n          </button>\r\n          <span>\r\n            Trang {currentPage} / {totalPages}\r\n          </span>\r\n          <button onClick={() => goToPage(currentPage + 1)} disabled={currentPage === totalPages}>\r\n            Trang sau\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LocationCRUD;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}