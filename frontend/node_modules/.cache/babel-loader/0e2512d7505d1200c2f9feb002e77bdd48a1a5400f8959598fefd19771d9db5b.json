{"ast":null,"code":"var _jsxFileName = \"G:\\\\IT4409\\\\frontend\\\\src\\\\components\\\\SimulationController.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SimulationController = ({\n  initialPosition,\n  onPositionChange\n}) => {\n  _s();\n  const [isCollapsed, setIsCollapsed] = useState(false); // State ƒë·ªÉ qu·∫£n l√Ω vi·ªác ·∫©n/hi·ªán\n  const [position, setPosition] = useState(initialPosition);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [panelPosition, setPanelPosition] = useState({\n    x: 20,\n    y: 150\n  });\n  const panelRef = useRef(null);\n\n  // C·∫≠p nh·∫≠t v·ªã tr√≠ n·ªôi b·ªô khi v·ªã tr√≠ ban ƒë·∫ßu thay ƒë·ªïi\n  useEffect(() => {\n    setPosition(initialPosition);\n  }, [initialPosition]);\n  const handleMove = (latChange, lngChange) => {\n    const newPos = {\n      lat: position.lat + latChange,\n      lng: position.lng + lngChange\n    };\n    setPosition(newPos);\n    onPositionChange(newPos);\n  };\n\n  // --- X·ª≠ l√Ω k√©o th·∫£ panel ---\n  const onMouseDown = e => {\n    setIsDragging(true);\n    setDragStart({\n      x: e.clientX - panelPosition.x,\n      y: e.clientY - panelPosition.y\n    });\n  };\n  const onMouseMove = e => {\n    if (!isDragging) return;\n    setPanelPosition({\n      x: e.clientX - dragStart.x,\n      y: e.clientY - dragStart.y\n    });\n  };\n  const onMouseUp = () => {\n    setIsDragging(false);\n  };\n  useEffect(() => {\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n    return () => {\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n    };\n  }, [isDragging]);\n  const moveStep = 0.001; // B∆∞·ªõc nh·∫£y t·ªça ƒë·ªô\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: panelRef,\n    className: `simulation-panel ${isCollapsed ? 'collapsed' : ''}`,\n    style: {\n      top: `${panelPosition.y}px`,\n      left: `${panelPosition.x}px`\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"simulation-header\",\n      onMouseDown: onMouseDown,\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uD83D\\uDD79\\uFE0F Gi\\u1EA3 l\\u1EADp di chuy\\u1EC3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"toggle-collapse-btn\",\n        onClick: () => setIsCollapsed(!isCollapsed),\n        title: isCollapsed ? \"M·ªü r·ªông\" : \"Thu g·ªçn\",\n        children: isCollapsed ? '‚äï' : '‚àí'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), !isCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"simulation-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"coords-display\",\n        children: [\"Lat: \", position.lat.toFixed(4), \", Lng: \", position.lng.toFixed(4)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"move-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"north\",\n          onClick: () => handleMove(moveStep, 0),\n          title: \"Di chuy\\u1EC3n l\\xEAn B\\u1EAFc\",\n          children: \"\\u2191\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"west\",\n          onClick: () => handleMove(0, -moveStep),\n          title: \"Di chuy\\u1EC3n sang T\\xE2y\",\n          children: \"\\u2190\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"center\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"east\",\n          onClick: () => handleMove(0, moveStep),\n          title: \"Di chuy\\u1EC3n sang \\u0110\\xF4ng\",\n          children: \"\\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"south\",\n          onClick: () => handleMove(-moveStep, 0),\n          title: \"Di chuy\\u1EC3n xu\\u1ED1ng Nam\",\n          children: \"\\u2193\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"reset-btn\",\n        onClick: () => onPositionChange(null),\n        children: \"Reset v\\u1EC1 v\\u1ECB tr\\xED th\\u1EADt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(SimulationController, \"A8eUgm6vMM146elp4Z4GhI0lRpk=\");\n_c = SimulationController;\nexport default SimulationController;\nvar _c;\n$RefreshReg$(_c, \"SimulationController\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","SimulationController","initialPosition","onPositionChange","_s","isCollapsed","setIsCollapsed","position","setPosition","isDragging","setIsDragging","dragStart","setDragStart","x","y","panelPosition","setPanelPosition","panelRef","handleMove","latChange","lngChange","newPos","lat","lng","onMouseDown","e","clientX","clientY","onMouseMove","onMouseUp","window","addEventListener","removeEventListener","moveStep","ref","className","style","top","left","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","toFixed","_c","$RefreshReg$"],"sources":["G:/IT4409/frontend/src/components/SimulationController.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nconst SimulationController = ({ initialPosition, onPositionChange }) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(false); // State ƒë·ªÉ qu·∫£n l√Ω vi·ªác ·∫©n/hi·ªán\r\n  const [position, setPosition] = useState(initialPosition);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const [panelPosition, setPanelPosition] = useState({ x: 20, y: 150 });\r\n  const panelRef = useRef(null);\r\n\r\n  // C·∫≠p nh·∫≠t v·ªã tr√≠ n·ªôi b·ªô khi v·ªã tr√≠ ban ƒë·∫ßu thay ƒë·ªïi\r\n  useEffect(() => {\r\n    setPosition(initialPosition);\r\n  }, [initialPosition]);\r\n\r\n  const handleMove = (latChange, lngChange) => {\r\n    const newPos = {\r\n      lat: position.lat + latChange,\r\n      lng: position.lng + lngChange,\r\n    };\r\n    setPosition(newPos);\r\n    onPositionChange(newPos);\r\n  };\r\n\r\n  // --- X·ª≠ l√Ω k√©o th·∫£ panel ---\r\n  const onMouseDown = (e) => {\r\n    setIsDragging(true);\r\n    setDragStart({\r\n      x: e.clientX - panelPosition.x,\r\n      y: e.clientY - panelPosition.y,\r\n    });\r\n  };\r\n\r\n  const onMouseMove = (e) => {\r\n    if (!isDragging) return;\r\n    setPanelPosition({\r\n      x: e.clientX - dragStart.x,\r\n      y: e.clientY - dragStart.y,\r\n    });\r\n  };\r\n\r\n  const onMouseUp = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('mousemove', onMouseMove);\r\n    window.addEventListener('mouseup', onMouseUp);\r\n    return () => {\r\n      window.removeEventListener('mousemove', onMouseMove);\r\n      window.removeEventListener('mouseup', onMouseUp);\r\n    };\r\n  }, [isDragging]);\r\n\r\n  const moveStep = 0.001; // B∆∞·ªõc nh·∫£y t·ªça ƒë·ªô\r\n\r\n  return (\r\n    <div\r\n      ref={panelRef}\r\n      className={`simulation-panel ${isCollapsed ? 'collapsed' : ''}`}\r\n      style={{ top: `${panelPosition.y}px`, left: `${panelPosition.x}px` }}\r\n    >\r\n      <div className=\"simulation-header\" onMouseDown={onMouseDown}>\r\n        <span>üïπÔ∏è Gi·∫£ l·∫≠p di chuy·ªÉn</span>\r\n        <button \r\n          className=\"toggle-collapse-btn\" \r\n          onClick={() => setIsCollapsed(!isCollapsed)}\r\n          title={isCollapsed ? \"M·ªü r·ªông\" : \"Thu g·ªçn\"}\r\n        >\r\n          {isCollapsed ? '‚äï' : '‚àí'}\r\n        </button>\r\n      </div>\r\n      {!isCollapsed && (\r\n        <div className=\"simulation-body\">\r\n          <div className=\"coords-display\">\r\n            Lat: {position.lat.toFixed(4)}, Lng: {position.lng.toFixed(4)}\r\n          </div>\r\n          <div className=\"move-controls\">\r\n            <button className=\"north\" onClick={() => handleMove(moveStep, 0)} title=\"Di chuy·ªÉn l√™n B·∫Øc\">‚Üë</button>\r\n            <button className=\"west\" onClick={() => handleMove(0, -moveStep)} title=\"Di chuy·ªÉn sang T√¢y\">‚Üê</button>\r\n            <div className=\"center\"></div> \r\n            <button className=\"east\" onClick={() => handleMove(0, moveStep)} title=\"Di chuy·ªÉn sang ƒê√¥ng\">‚Üí</button>\r\n            <button className=\"south\" onClick={() => handleMove(-moveStep, 0)} title=\"Di chuy·ªÉn xu·ªëng Nam\">‚Üì</button>\r\n          </div>\r\n          <button className=\"reset-btn\" onClick={() => onPositionChange(null)}>\r\n            Reset v·ªÅ v·ªã tr√≠ th·∫≠t\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimulationController;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,oBAAoB,GAAGA,CAAC;EAAEC,eAAe;EAAEC;AAAiB,CAAC,KAAK;EAAAC,EAAA;EACtE,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACvD,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAACM,eAAe,CAAC;EACzD,MAAM,CAACO,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAACe,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC;IAAEiB,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAC1D,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGpB,QAAQ,CAAC;IAAEiB,CAAC,EAAE,EAAE;IAAEC,CAAC,EAAE;EAAI,CAAC,CAAC;EACrE,MAAMG,QAAQ,GAAGnB,MAAM,CAAC,IAAI,CAAC;;EAE7B;EACAD,SAAS,CAAC,MAAM;IACdW,WAAW,CAACN,eAAe,CAAC;EAC9B,CAAC,EAAE,CAACA,eAAe,CAAC,CAAC;EAErB,MAAMgB,UAAU,GAAGA,CAACC,SAAS,EAAEC,SAAS,KAAK;IAC3C,MAAMC,MAAM,GAAG;MACbC,GAAG,EAAEf,QAAQ,CAACe,GAAG,GAAGH,SAAS;MAC7BI,GAAG,EAAEhB,QAAQ,CAACgB,GAAG,GAAGH;IACtB,CAAC;IACDZ,WAAW,CAACa,MAAM,CAAC;IACnBlB,gBAAgB,CAACkB,MAAM,CAAC;EAC1B,CAAC;;EAED;EACA,MAAMG,WAAW,GAAIC,CAAC,IAAK;IACzBf,aAAa,CAAC,IAAI,CAAC;IACnBE,YAAY,CAAC;MACXC,CAAC,EAAEY,CAAC,CAACC,OAAO,GAAGX,aAAa,CAACF,CAAC;MAC9BC,CAAC,EAAEW,CAAC,CAACE,OAAO,GAAGZ,aAAa,CAACD;IAC/B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMc,WAAW,GAAIH,CAAC,IAAK;IACzB,IAAI,CAAChB,UAAU,EAAE;IACjBO,gBAAgB,CAAC;MACfH,CAAC,EAAEY,CAAC,CAACC,OAAO,GAAGf,SAAS,CAACE,CAAC;MAC1BC,CAAC,EAAEW,CAAC,CAACE,OAAO,GAAGhB,SAAS,CAACG;IAC3B,CAAC,CAAC;EACJ,CAAC;EAED,MAAMe,SAAS,GAAGA,CAAA,KAAM;IACtBnB,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC;EAEDb,SAAS,CAAC,MAAM;IACdiC,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAEH,WAAW,CAAC;IACjDE,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEF,SAAS,CAAC;IAC7C,OAAO,MAAM;MACXC,MAAM,CAACE,mBAAmB,CAAC,WAAW,EAAEJ,WAAW,CAAC;MACpDE,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEH,SAAS,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,CAACpB,UAAU,CAAC,CAAC;EAEhB,MAAMwB,QAAQ,GAAG,KAAK,CAAC,CAAC;;EAExB,oBACEjC,OAAA;IACEkC,GAAG,EAAEjB,QAAS;IACdkB,SAAS,EAAE,oBAAoB9B,WAAW,GAAG,WAAW,GAAG,EAAE,EAAG;IAChE+B,KAAK,EAAE;MAAEC,GAAG,EAAE,GAAGtB,aAAa,CAACD,CAAC,IAAI;MAAEwB,IAAI,EAAE,GAAGvB,aAAa,CAACF,CAAC;IAAK,CAAE;IAAA0B,QAAA,gBAErEvC,OAAA;MAAKmC,SAAS,EAAC,mBAAmB;MAACX,WAAW,EAAEA,WAAY;MAAAe,QAAA,gBAC1DvC,OAAA;QAAAuC,QAAA,EAAM;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAClC3C,OAAA;QACEmC,SAAS,EAAC,qBAAqB;QAC/BS,OAAO,EAAEA,CAAA,KAAMtC,cAAc,CAAC,CAACD,WAAW,CAAE;QAC5CwC,KAAK,EAAExC,WAAW,GAAG,SAAS,GAAG,SAAU;QAAAkC,QAAA,EAE1ClC,WAAW,GAAG,GAAG,GAAG;MAAG;QAAAmC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EACL,CAACtC,WAAW,iBACXL,OAAA;MAAKmC,SAAS,EAAC,iBAAiB;MAAAI,QAAA,gBAC9BvC,OAAA;QAAKmC,SAAS,EAAC,gBAAgB;QAAAI,QAAA,GAAC,OACzB,EAAChC,QAAQ,CAACe,GAAG,CAACwB,OAAO,CAAC,CAAC,CAAC,EAAC,SAAO,EAACvC,QAAQ,CAACgB,GAAG,CAACuB,OAAO,CAAC,CAAC,CAAC;MAAA;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1D,CAAC,eACN3C,OAAA;QAAKmC,SAAS,EAAC,eAAe;QAAAI,QAAA,gBAC5BvC,OAAA;UAAQmC,SAAS,EAAC,OAAO;UAACS,OAAO,EAAEA,CAAA,KAAM1B,UAAU,CAACe,QAAQ,EAAE,CAAC,CAAE;UAACY,KAAK,EAAC,gCAAmB;UAAAN,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACtG3C,OAAA;UAAQmC,SAAS,EAAC,MAAM;UAACS,OAAO,EAAEA,CAAA,KAAM1B,UAAU,CAAC,CAAC,EAAE,CAACe,QAAQ,CAAE;UAACY,KAAK,EAAC,4BAAoB;UAAAN,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACvG3C,OAAA;UAAKmC,SAAS,EAAC;QAAQ;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC9B3C,OAAA;UAAQmC,SAAS,EAAC,MAAM;UAACS,OAAO,EAAEA,CAAA,KAAM1B,UAAU,CAAC,CAAC,EAAEe,QAAQ,CAAE;UAACY,KAAK,EAAC,kCAAqB;UAAAN,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACvG3C,OAAA;UAAQmC,SAAS,EAAC,OAAO;UAACS,OAAO,EAAEA,CAAA,KAAM1B,UAAU,CAAC,CAACe,QAAQ,EAAE,CAAC,CAAE;UAACY,KAAK,EAAC,+BAAqB;UAAAN,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtG,CAAC,eACN3C,OAAA;QAAQmC,SAAS,EAAC,WAAW;QAACS,OAAO,EAAEA,CAAA,KAAMzC,gBAAgB,CAAC,IAAI,CAAE;QAAAoC,QAAA,EAAC;MAErE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACvC,EAAA,CAzFIH,oBAAoB;AAAA8C,EAAA,GAApB9C,oBAAoB;AA2F1B,eAAeA,oBAAoB;AAAC,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}