/* src/MapContainer.css */

/* ... (Giá»¯ nguyÃªn cÃ¡c style cÅ© cho contribute-controls, btn-contribute, v.v...) ... */

/* Container chá»©a cÃ¡c nÃºt Ä‘iá»u khiá»ƒn */
.contribute-controls {
    position: absolute;
    /* Máº·c Ä‘á»‹nh Desktop: Náº±m gÃ³c trÃªn bÃªn pháº£i */
    top: 90px; 
    right: 15px;
    z-index: 1000; 
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 12px;
    transition: all 0.3s ease;
}

.btn-contribute {
    background: white;
    color: #333;
    border: none;
    padding: 12px 20px;
    border-radius: 50px;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.2s ease;
    font-size: 1rem;
    white-space: nowrap;
}

.btn-contribute:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(0,0,0,0.2); }
.btn-contribute.active { background: #e74c3c; color: white; }

.btn-use-gps {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
    display: flex; align-items: center; gap: 8px; font-size: 0.9rem;
    animation: fadeIn 0.3s ease;
}
.btn-use-gps:hover { background: #2980b9; }

@keyframes fadeIn { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }

/* HÆ°á»›ng dáº«n chá»n vá»‹ trÃ­ */
.add-mode-instruction {
    position: absolute;
    top: 150px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(44, 62, 80, 0.9);
    color: white;
    padding: 10px 25px;
    border-radius: 30px;
    z-index: 1000;
    pointer-events: none;
    font-weight: 600;
    backdrop-filter: blur(4px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    text-align: center;
    width: max-content;
    max-width: 90%;
}

/* NÃºt xÃ¡c nháº­n trong Popup */
.btn-confirm-add {
    margin-top: 10px;
    background: #27ae60;
    color: white;
    border: none;
    padding: 10px 16px; /* Padding to hÆ¡n chÃºt */
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    width: 100%;
    font-size: 0.95rem;
}
.btn-confirm-add:hover { background: #219150; }


/* ========================================= */
/* ğŸ”¥ MOBILE RESPONSIVE CHO MAP ğŸ”¥ */
/* ========================================= */
@media (max-width: 768px) {
    /* Di chuyá»ƒn nÃºt ÄÃ³ng gÃ³p xuá»‘ng dÆ°á»›i cÃ¹ng Ä‘á»ƒ dá»… báº¥m báº±ng ngÃ³n cÃ¡i */
    .contribute-controls {
        top: auto;
        bottom: 30px; /* CÃ¡ch Ä‘Ã¡y 30px */
        right: 15px;
        align-items: flex-end;
    }

    /* Äáº£o ngÆ°á»£c thá»© tá»±: NÃºt GPS náº±m trÃªn nÃºt ÄÃ³ng gÃ³p */
    .contribute-controls {
        flex-direction: column-reverse; 
    }

    .btn-contribute {
        padding: 15px 25px; /* NÃºt to hÆ¡n trÃªn mobile */
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .add-mode-instruction {
        top: 100px; /* Äáº©y lÃªn cao hÆ¡n Ä‘á»ƒ khÃ´ng che báº£n Ä‘á»“ */
        font-size: 0.9rem;
        padding: 8px 15px;
    }
}

/* ========================================= */
/* ğŸŒ™ DARK MODE SUPPORT CHO POPUP ğŸŒ™ */
/* ========================================= */

/* Ghi Ä‘Ã¨ style cá»§a Leaflet Popup khi body cÃ³ class .dark-mode */
/* Sá»­a lá»—i trÃ¹ng mÃ u: Äáº·t ná»n tá»‘i (#2a2d33) vÃ  chá»¯ sÃ¡ng (#f9fafb) rÃµ rÃ ng */
body.dark-mode .leaflet-popup-content-wrapper,
body.dark-mode .leaflet-popup-tip {
    background-color: #2a2d33 !important; /* Ná»n tá»‘i */
    color: #f9fafb !important; /* Chá»¯ sÃ¡ng */
    box-shadow: 0 3px 14px rgba(0,0,0,0.4) !important;
}

/* Äáº£m báº£o cÃ¡c tháº» con bÃªn trong cÅ©ng nháº­n mÃ u chá»¯ sÃ¡ng */
body.dark-mode .leaflet-popup-content,
body.dark-mode .leaflet-popup-content * {
    color: #f9fafb !important;
}

/* RiÃªng cÃ¡c thÃ nh pháº§n cá»¥ thá»ƒ cÃ³ thá»ƒ chá»‰nh mÃ u khÃ¡c cho Ä‘áº¹p */
body.dark-mode .leaflet-popup-content h3,
body.dark-mode .leaflet-popup-content h4,
body.dark-mode .popup-title {
    color: #f9fafb !important; /* TiÃªu Ä‘á» tráº¯ng sÃ¡ng */
    border-bottom-color: #374151 !important;
}

body.dark-mode .leaflet-popup-content p,
body.dark-mode .popup-info-line,
body.dark-mode .popup-info-line span {
    color: #cbd5e1 !important; /* Text phá»¥ mÃ u xÃ¡m sÃ¡ng hÆ¡n chÃºt Ä‘á»ƒ phÃ¢n biá»‡t */
}

/* Icon trong popup - Äáº£o ngÆ°á»£c mÃ u Ä‘á»ƒ dá»… nhÃ¬n trÃªn ná»n tá»‘i */
body.dark-mode .popup-icon {
    filter: brightness(0.8) invert(1); 
}

/* NÃºt "Xem chi tiáº¿t" trong popup */
body.dark-mode .popup-details-button {
    background-color: #374151 !important; /* Ná»n nÃºt tá»‘i hÆ¡n ná»n popup */
    color: #60a5fa !important; /* Chá»¯ xanh dÆ°Æ¡ng sÃ¡ng */
    border: 1px solid #4b5563 !important;
}

body.dark-mode .popup-details-button:hover {
    background-color: #4b5563 !important;
    color: #fff !important;
}

/* NÃºt chá»‰ Ä‘Æ°á»ng */
body.dark-mode .popup-directions-button {
    filter: brightness(0.9);
}

/* ========================================= */
/* ğŸŒ‘ GOOGLE MAP DARK MODE HACK ğŸŒ‘ */
/* ========================================= */

/* Äáº£o ngÆ°á»£c mÃ u sáº¯c cá»§a báº£n Ä‘á»“ Ä‘á»ƒ táº¡o hiá»‡u á»©ng Dark Mode. */
.google-map-dark .leaflet-tile {
    filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%) !important;
}

/* ğŸ”¥ FIX: Äáº£o ngÆ°á»£c láº¡i mÃ u cá»§a Popup Ä‘á»ƒ nÃ³ KHÃ”NG bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi filter cá»§a báº£n Ä‘á»“ */
/* VÃ¬ Popup náº±m trong overlay pane cá»§a Leaflet, Ä‘Ã´i khi nÃ³ bá»‹ dÃ­nh filter náº¿u khÃ´ng xá»­ lÃ½ ká»¹ */
.google-map-dark .leaflet-pane.leaflet-popup-pane {
    filter: invert(100%) hue-rotate(180deg) !important; 
    /* Äáº£o ngÆ°á»£c láº¡i láº§n ná»¯a Ä‘á»ƒ vá» mÃ u chuáº©n */
}
@media (max-width: 768px) {
    /* Äáº©y Radius Filter xuá»‘ng má»™t chÃºt hoáº·c sang trÃ¡i Ä‘á»ƒ khÃ´ng che nÃºt khÃ¡c */
    .radius-filter-panel {
        top: 10px;
        right: 10px;
        left: 10px; /* Full chiá»u ngang */
        width: auto; /* Tá»± Ä‘á»™ng theo left/right */
        flex-direction: row; /* Xáº¿p ngang cho gá»n */
        align-items: center;
        justify-content: space-between;
    }

    .radius-input-container input[type="number"] {
        width: 50px;
    }
}